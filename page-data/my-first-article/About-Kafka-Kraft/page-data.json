{"componentChunkName":"component---node-modules-gatsby-theme-portfolio-minimal-src-templates-article-index-tsx","path":"/my-first-article/About-Kafka-Kraft/","result":{"pageContext":{"article":{"banner":{"alt":"Kafka","caption":null,"src":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB1klEQVR42pWS20vCYBTA/asC6UIEQVFa/QNdnFozTUjsQummZdZLSI9dtLQsNnvpRpFlD2l/wCJXUbTtqYTc5iaImp2pmGAPdeD7OJxzft93bqpSqSTLcvz2VhRF0AuFQrFYLP1NVHCWl7wGHeJyYhXTV1kqSiNQ81bhUb1hJ7CtH9HJknQVjdLJZI38apD6VxSYeXvr7OhgGTZCkmbUZBod41gW7DzPQwn1DCgf7+/pdDqfz1d/PiTJVnXzbjCkGxrGHE5I4fnpCYqfnZ4ReF6S5Iwovr68QOTVZdRus3ncC49JOpvNqu4pStvTyzLMgEa77Q8cHx0l4nGIy2QypjHU6/GcnZxO2+0TZjNqNGIOh33StrS46JybjxCEAvf1ajiO69dodwIKfJdIAAyJtbe2WS2Wm1gMALBAU/2bW3uh0ALualGrKYpS0o4QpLqpKRQMjgwOuTAcgiBtgN047ltdPQiHZ6amJq1WI6InCeIgvL+5vrHm88FdbhjD9HR1cywHPqvZMo6ilYbB5KGw9OcndIimaUEQsmWRJCmXy6VSKQU2IEhgy4/AqGT54vw8+fBQG1K12w1rU/Eq8IrXC6N2Y/ivS1L/Si3gZ87wYew6Jgr/Xs9vFqVLFScdcPIAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/63fdbbcf1c93c7c30e2a1c96954db211/be504/kafka.png","srcSet":"/static/63fdbbcf1c93c7c30e2a1c96954db211/966b5/kafka.png 80w,\n/static/63fdbbcf1c93c7c30e2a1c96954db211/37b8e/kafka.png 159w,\n/static/63fdbbcf1c93c7c30e2a1c96954db211/be504/kafka.png 318w","sizes":"(min-width: 318px) 318px, 100vw"},"sources":[{"srcSet":"/static/63fdbbcf1c93c7c30e2a1c96954db211/41d58/kafka.webp 80w,\n/static/63fdbbcf1c93c7c30e2a1c96954db211/d2420/kafka.webp 159w,\n/static/63fdbbcf1c93c7c30e2a1c96954db211/7b932/kafka.webp 318w","type":"image/webp","sizes":"(min-width: 318px) 318px, 100vw"}]},"width":660,"height":400.566037735849}}}},"body":"<h1>🚀 Apache Kafka Kraft</h1>\n<p><img src=\"https://raw.githubusercontent.com/jms0522/jms0522.github.io/main/content/images/kafka/kafka.png\" alt=\"Kafka\"></p>\n<p>오늘은 Kafka의 Kraft 모드에 대해서 공부했습니다.</p>\n<p>Kraft 모드와 장단점을 알아봅시다!</p>\n<h2>Zookeeper With Kafka</h2>\n<img src=\"https://raw.githubusercontent.com/jms0522/jms0522.github.io/main/content/images/kafka/zookeeper.png\" alt=\"Total\" width=\"600\">\n<p>Kafka는 Zookeeper라는 관리 도구를 사용합니다.</p>\n<p>Zookeeper는 Kafka의 메타데이터, 브로커 상태, 토픽, 컨트롤러 등을 관리합니다.</p>\n<p>어떤 브로커가 특정 파티션의 리더인지 결졍 및 수행을 하고,</p>\n<p>토픽 및 권한에 대한 구성을 저장합니다.</p>\n<p>다양한 변동 사항이 있을 시, 이를 카프카에게 보고합니다.</p>\n<p>하지만 결국 Kafka 자체가 아닌 외부에서 메타데이터를 관리하여 확장성에 제한이 있고</p>\n<p>데이터 중복, 브로커의 메타데이터와 Zookeeper의 메타데이터의 불일치로 인한 데이터 정합성에 문제가 생기고</p>\n<p>서버/시스템의 추가 및 복잡성이 증가하는 한계점이 있습니다.</p>\n<p>또한 관리적인 부분에서도 둘은 서로 다른 어플리케이션이므로, 서로 다른 환경, 파일 등을 가지고 있어 동시에 운영을 해야합니다.</p>\n<p>이 한계점을 보완하는게 Kraft 모드입니다.</p>\n<h2>Kraft : Without Zookeeper</h2>\n<img src=\"https://raw.githubusercontent.com/jms0522/jms0522.github.io/main/content/images/kafka/kraft.png\" alt=\"Total\" width=\"600\">\n<p>Kraft 모드는 즉 Zookeeper가 관리를 하는 게 아닌 Kafka 자체가 관리를 할 수 있게 해줍니다.</p>\n<p>즉 Zookeeper의 의존성을 제거합니다.</p>\n<p>단순화가 되어 확장성, 안정성, 일관성에도 도움이 됩니다.</p>\n<p>이는 운영을 좀 더 쉽게 만들어 줄 수 있습니다.</p>\n<p>Zookeeper가 관리하던 메타데이터를 카스카 클러스터 내의 브로커 중 컨트롤러를 선출한 뒤 별도의 토픽으로 메타데이터를 관리하게 됩니다.</p>\n<img src=\"https://raw.githubusercontent.com/jms0522/jms0522.github.io/main/content/images/kafka/kraft-detail.png\" alt=\"Total\" width=\"600\">\n<p>컨트롤러가 늘어나고 이들 중 리더 컨트롤러가 액티브 컨트롤러이면서 리더 역할을 담당합니다.</p>\n<p>리더 역할을 하는 컨트롤러는 write 역할도 맡아 수행합니다.</p>\n<p>이 처럼 자체에서 관리를 함으로 간편한 운영과 확장성이 있습니다.</p>\n<p>Kraft 모드에서 주요한 성능 개선 중 하는 바로 파티션의 리더 선출 최적화입니다.</p>\n<p>컨트롤러의 주요 역할이 파티션의 리더를 선출하는 것인데 대량의 파티션에 대한 작업 시간은 다소 소요되게 됩니다.</p>\n<p>이는 데이터 파이프라인에 좋지 않은 요소로 작용할 수 있습니다.</p>\n<p>Zookeeper에서는 이 때문에 클러스터의 전체 파티션 수를 200,000 정도로 제한 했으나</p>\n<p>Kraft에서는 더 많은 파티션을 만들 수 있습니다.</p>\n<p>또 다른 장점은 복구에 필요한 시간입니다.</p>\n<img src=\"https://raw.githubusercontent.com/jms0522/jms0522.github.io/main/content/images/kafka/recovery.png\" alt=\"Total\" width=\"600\">","categories":["Kafka","ALL"],"date":"October 23, 2024","description":"Kafka 간단한 소개글입니다.","id":"ea998534-eb77-5d38-ad9e-418365708b0b","keywords":["Pipeline","Kafka","Kraft"],"slug":"/my-first-article/About-Kafka-Kraft/","title":" 🚀 [Kafka] About Kafka Kraft ","readingTime":{"text":"4 min read"}},"listingPagePath":"/blog"}},"staticQueryHashes":["3262260831","948380417"],"slicesMap":{}}