{"componentChunkName":"component---node-modules-gatsby-theme-portfolio-minimal-src-templates-article-index-tsx","path":"/my-first-article/About-Kafka-Topic-Partition/","result":{"pageContext":{"article":{"banner":{"alt":"Kafka","caption":null,"src":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB1klEQVR42pWS20vCYBTA/asC6UIEQVFa/QNdnFozTUjsQummZdZLSI9dtLQsNnvpRpFlD2l/wCJXUbTtqYTc5iaImp2pmGAPdeD7OJxzft93bqpSqSTLcvz2VhRF0AuFQrFYLP1NVHCWl7wGHeJyYhXTV1kqSiNQ81bhUb1hJ7CtH9HJknQVjdLJZI38apD6VxSYeXvr7OhgGTZCkmbUZBod41gW7DzPQwn1DCgf7+/pdDqfz1d/PiTJVnXzbjCkGxrGHE5I4fnpCYqfnZ4ReF6S5Iwovr68QOTVZdRus3ncC49JOpvNqu4pStvTyzLMgEa77Q8cHx0l4nGIy2QypjHU6/GcnZxO2+0TZjNqNGIOh33StrS46JybjxCEAvf1ajiO69dodwIKfJdIAAyJtbe2WS2Wm1gMALBAU/2bW3uh0ALualGrKYpS0o4QpLqpKRQMjgwOuTAcgiBtgN047ltdPQiHZ6amJq1WI6InCeIgvL+5vrHm88FdbhjD9HR1cywHPqvZMo6ilYbB5KGw9OcndIimaUEQsmWRJCmXy6VSKQU2IEhgy4/AqGT54vw8+fBQG1K12w1rU/Eq8IrXC6N2Y/ivS1L/Si3gZ87wYew6Jgr/Xs9vFqVLFScdcPIAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/63fdbbcf1c93c7c30e2a1c96954db211/be504/kafka.png","srcSet":"/static/63fdbbcf1c93c7c30e2a1c96954db211/966b5/kafka.png 80w,\n/static/63fdbbcf1c93c7c30e2a1c96954db211/37b8e/kafka.png 159w,\n/static/63fdbbcf1c93c7c30e2a1c96954db211/be504/kafka.png 318w","sizes":"(min-width: 318px) 318px, 100vw"},"sources":[{"srcSet":"/static/63fdbbcf1c93c7c30e2a1c96954db211/41d58/kafka.webp 80w,\n/static/63fdbbcf1c93c7c30e2a1c96954db211/d2420/kafka.webp 159w,\n/static/63fdbbcf1c93c7c30e2a1c96954db211/7b932/kafka.webp 318w","type":"image/webp","sizes":"(min-width: 318px) 318px, 100vw"}]},"width":660,"height":400.566037735849}}}},"body":"<h1>🚀 Apache Kafka Topic &#x26; Partition</h1>\n<h2>🔎 Overview</h2>\n<p>카프카의 데이터를 구분하기 위한 단위 Topic과 Partition에 대해여.</p>\n<h2>토픽이란 ?</h2>\n<img src=\"https://raw.githubusercontent.com/jms0522/jms0522.github.io/main/content/images/kafka/topic-partition.png\" alt=\"topic\" width=\"600\">\n<p><strong>Topic</strong>은 카프카에서 데이터를 구분하기 위한 단위입니다.</p>\n<p>토픽은 한 개 이상의 파티션을 소유하고 있습니다.</p>\n<p>파티션에는 프로듀서가 보낸 데이터들이 저장됩니다.</p>\n<p>이 데이터를 <strong>레코드 (Record)</strong> 라고 부릅니다.</p>\n<p>파티션은 Queue와 비슷한 구조라고 생각을 하면 이해하기 편합니다.</p>\n<p>FIFO 구조로 먼저 들어간 레코드는 컨슈머가 먼저 가져가게 됩니다.</p>\n<p>하지만 Queue는 데이터를 pop() 하며 삭제를 하지만 <strong>카프카는 삭제 하지 않습니다</strong>.</p>\n<p>파티션의 레코드는 컨슈머가 데이터를 가져가는 것과 별개로 관리되어, 여러 컨슈머 그룹이 <strong>토픽의 데이터를 여러 번 가져갈 수 있습니다</strong>.</p>\n<hr>\n<h2>토픽 생성 규칙</h2>\n<p>이름의 생성 규칙이 있는데요</p>\n<p>모호하게 작성을 하지 않는 게 중요합니다.</p>\n<p>토픽의 이름의 변경이 불가능 하기에 미리 규칙에 따라 생성하는 것을 추천합니다.</p>\n<p>&#x3C;환경>&#x3C;팀-명>&#x3C;어플리케이션 이름>&#x3C;메시지-타입></p>\n<p>&#x3C;프로젝트명>&#x3C;서비스명>&#x3C;환경>&#x3C;이벤트명></p>\n<p>&#x3C;카프카-클러스터명>&#x3C;환경>&#x3C;서비스명>&#x3C;메시지-타입></p>\n<p>ex) dev/marketing1-team.website-platform.json</p>\n<p>이런식으로 작성하면 더 편리하게 관리 할 수 있습니다.</p>\n<h2>리더와 팔로우 파티션?</h2>\n<h2>특정 브로커에 파티션 쏠림 현상</h2>\n<p>특정 브로커에 리더 파티션 쏠림 현상이 생길 수 있습니다. (클러스터 운영에서 중요한 부분)</p>\n<p>이럴 때 kafka-reassign-partition.sh 명령으로 파티션 재분배가 가능합니다.</p>\n<h2>파티션은 컨슈머와 1:1 관계</h2>\n<p>컨슈머와 파티션은 1:1 관계이기에 파티션 늘리면 컨슈머도 비례 해서 늘어나야 합니다.</p>\n<p>물론 장애 발생 시 컨슈머가 1,2번 파티션을 담당할 수 있습니다.</p>\n<p>컨슈머 + 파티션 늘리면 처리량이 늘어납니다.</p>\n<h2>파티션 개수를 줄이는 건 지원하지 않는다.</h2>\n<p>한 번 늘리면 줄이는 것은 불가합니다.</p>\n<p>데이터의 순서와 무결성을 보장하기 힘들어지기 때문입니다.</p>\n<p>토픽을 삭제하고 재성성하는 방법 밖에 없습니다. (마이그레이션 방법도 있긴 합니다.)</p>\n<p>파티션 개수를 늘릴 땐 신중하게 고민하고 실행합시다.</p>","categories":["Kafka","ALL"],"date":"October 26, 2024","description":"Kafka KRaft 소개글입니다.","id":"4dcc4a6c-35c0-5571-b14f-93d5ba136fd8","keywords":["Pipeline","Kafka"],"slug":"/my-first-article/About-Kafka-Topic-Partition/","title":" 🚀 [Kafka] About Kafka Topic & Partition","readingTime":{"text":"4 min read"}},"listingPagePath":"/blog"}},"staticQueryHashes":["3262260831","948380417"],"slicesMap":{}}